# ML Group Project

![Static Badge](https://img.shields.io/badge/ML-2024_Fall-Green)  ![GitHub code size in bytes](https://img.shields.io/github/languages/code-size/iRyougi/ML-Group-Project)  ![GitHub License](https://img.shields.io/github/license/iRyougi/ML-Group-Project)

**未经作者许可，2025年1月1日之前禁止复制、修改或发布该代码**

**其他语言版本: [English](README_en.md), [中文](README.md).**

Machine Learning小组项目，旨在开发一款基于机器学习自动帮助编译器缩进Python的插件（VS Code版本）

## Question - 我们解决了什么问题？

在Python编程中，语句的层次关系通常通过缩进来表示，而不像C或Java那样依赖于分号等明确的符号来区分行结束或语句之间的关系。这一特性虽然简洁明了，但对初学者和大型代码维护来说，却可能引发因缩进不当而导致的语法错误，尤其在代码逻辑复杂时更容易出错。

> [!NOTE]
>
> C语言通常使用";"来表示层次关系

我们尝试利用机器学习技术来自动识别和纠正代码中的缩进错误。通过分析大量正确缩进与错误缩进的Python代码，模型可以学习到不同语句间的正确缩进规则与模式。当检测到潜在的缩进错误时，模型能够提示用户或自动修改，从而降低编码错误率，提高代码的可读性和可维护性。这一应用在提升编程效率和减少新手的学习曲线方面有着广泛的应用潜力。

## 现有解决方案

### 自动解析

**IS-CFG 缩进敏感上下文无关文法**是一种专门处理Python缩进问题的方法。它通过一些语法规则把Python的缩进要求形式化，可以开发出解析器，来确保代码的缩进符合标准。简单来说，IS-CFG会用NEWLINE来分隔语句，用INDENT和DEDENT来表示缩进的增加和减少，还可以用=、>、≥等符号来定义缩进关系。

IS-CFG的**优点**在于它能非常精准地表达Python的缩进规则，这样可以避免代码中因为缩进产生的歧义。通过IS-CFG，我们可以开发出高效的解析器来自动检查并解析代码，确保代码的缩进符合规范。此外，统一的缩进规则还能提升代码的可读性和维护性，避免因为缩进问题而引发的语法错误。IS-CFG还适合用来开发代码格式化工具，自动调整代码的缩进，让代码一键符合规范要求。这对于编写和维护Python代码都非常实用。

不过，IS-CFG也有一些**缺点**。首先，它有一定的学习门槛，理解和掌握这些规则需要一些理论基础，对初学者可能会有点难。此外，基于IS-CFG开发解析器或代码格式化工具需要一定的技术投入，开发成本不低。

------

### 直观检测

**立体视觉算法**是另一种方法，它通过将Python代码导入电子表格中并用不同视觉方式来展示缩进级别，帮助发现缩进问题。具体操作是先把代码转换成电子表格格式，每行代码对应电子表格中的一行，单元格中显示该行代码的**前导空格数**（一行代码或文本开头的连续空格数量）。接下来通过“左眼视图”和“右眼视图”两种方式展示缩进级别。在“左眼视图”中，程序将空格数转化为缩进级别：缩进块数等于当前代码行前面的空格数除以默认的缩进空格数（比如8个空格为一级缩进），如果有余数，则再加一个缩进块。而在“右眼视图”中，缩进块的数量直接等于代码行前的空格数除以默认的缩进空格数，不加余数，显示更直观。如果左右视图中同一行的缩进块数量不同，程序员就能快速发现缩进错误，便于后续调整。

```python
#主代码块（无缩进）
def example_function():
    #一级缩进，表示这个代码属于example_function函数内
    if condition:
        #二级缩进，表示这个代码属于if语句块内
        do_something()
```

这个方法的**优点**是直观，缩进问题在电子表格中一目了然，而且两种视图对比使得错误位置更清晰易懂，并且自动修正小缩进错误的功能还能节省时间。

不过，它的**缺点**是需要手动把代码导出到电子表格里，对于大型项目或频繁编辑的代码可能不太方便。此外，它只能修正一些小范围内的缩进错误，对于较大的问题还是需要手动调整。

## 如何实现我们的目标？

### 爬虫与数据集

为实现自动纠正Python代码缩进错误的目标，我们采用了一种系统化的数据收集与处理方法。首先，通过网络爬虫从多个Python答题网站上抓取了大量的正确代码示例，构建了我们数据集的原型。接着，经过人工筛选，我们将其中仅适用于Python 2.0的代码文件分离并删除，因为这些代码不符合我们的训练需求。对筛选后符合Python 3.x的代码文件，我们进行了手动修改，故意引入常见的缩进错误，从而生成了带有错误缩进的代码样本，并与正确代码一起构建了数据集。

最终，我们获得了包含“正确的代码文件”、“带有缩进错误的代码文件”以及“正确的输出”的完整数据集。这种方法为机器学习模型提供了有针对性的训练素材，使模型能够有效地学习如何识别和纠正代码中的缩进错误。

> [!NOTE]
>
> 在数据爬取过程中，我们遇到了一些挑战。首先，部分代码仅适用于Python 2.0，这些代码包含与Python 3.x不兼容的语法，不符合我们训练的需求。其次，部分爬取的文件中出现了CSS文件误标为`.py`文件，导致这些文件内容呈现错误。
>
> 为解决这些问题，我们采取了手动剔除的方案。通过人工筛选，我们排除了Python 2.0专用代码和错误标记的CSS文件。此外，我们加大了爬取的数据量，确保在删除不符合要求的文件后，数据集仍然足够大，可以支持训练模型。这一方法帮助我们构建了一个高质量的、适用于Python 3.x的代码数据集，从而提高了训练效果和模型的准确性。

### 数据集标准

#### 结构

- 数据集
  - exercise_1 -- 文件夹
    - exercise_1.py -- 代码正确文件（参考）
    - exercise_1_e.py -- 缩进错误的代码
    - result_1.json -- 正确的输出结果
  - exercise_2 -- 文件夹
  - exercise_3 -- 文件夹
  - ......

**训练量：至少100个文件**

#### 文件标准



## 结果分析

## 未来的工作
